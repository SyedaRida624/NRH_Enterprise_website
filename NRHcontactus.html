<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Contact Us | NRH Enterprises</title>
    <link rel="stylesheet" href="NRHstyle.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>
<header>
    <nav class="container">
        <a href="index.html" class="logo">NRH Enterprises</a>
        <ul class="nav-links">
            <li><a href="NRHservices.html">Services</a></li>
            <li><a href="NRHabout.html">About Us</a></li>
            <li><a href="NRHcontactus.html" class="active">Contact Us</a></li>
        </ul>
    </nav>
</header>
<section class="hero" style="height:40vh;
background-image:url('https://images.unsplash.com/photo-1497366216548-37526070297c');">
    <div class="hero-overlay"></div>
    <div class="container hero-content">
        <h1>Contact Us</h1>
        <p>We are here to help you</p>
    </div>
</section>
<section class="container" style="margin:60px auto 50px;">
    <div class="contact-grid">

        <div class="form-side">
            <h3>Send Us a Message</h3>

            <input type="text" id="name" placeholder="Full Name" class="contact-input">
            <input type="email" id="email" placeholder="Email Address" class="contact-input">
            <input type="tel" id="phone" placeholder="Phone Number" class="contact-input">
            <textarea id="message" rows="5" placeholder="Message" class="contact-input"></textarea>

            <button type="button" class="btn-secondary" onclick="addMessage()">Submit</button>
        </div>

        <div class="info-side">
            <h3>Our Information</h3>
            <p><i class="fa-solid fa-location-dot"></i> Doha Emporium B-17, Islamabad</p>
            <p><i class="fa-solid fa-phone"></i> +92 335 8584414</p>

            <div class="map-container">
                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d106203.54177810306!2d72.9462409!3d33.6844202!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x38dfbfd07891722f%3A0x6059515133b45273!2sIslamabad%2C%20Islamabad%20Capital%20Territory!5e0!3m2!1sen!2spk!4v1700000000000"
                    width="100%"
                    height="300"
                    style="border:0;border-radius:10px;"
                    allowfullscreen=""
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>

    </div>
</section>
<section class="container crud-section" id="adminSection" style="display:none;">
    <h3>Submitted Messages (Admin Only)</h3>
    <div class="table-wrapper">
        <table class="crud-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Message</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="messageList"></tbody>
        </table>
    </div>
</section>

<script>
    
    const adminPassword = "NRHadmin123"; 
    let messages = JSON.parse(localStorage.getItem("messages")) || [];
    let editIndex = null;
    function displayMessages() {
        const table = document.getElementById("messageList");
        table.innerHTML = "";
        messages.forEach((msg, index) => {
            table.innerHTML += `
                <tr>
                    <td>${msg.name}</td>
                    <td>${msg.email}</td>
                    <td>${msg.phone}</td>
                    <td>${msg.message}</td>
                    <td>
                        <button onclick="editMessage(${index})">Edit</button>
                        <button onclick="deleteMessage(${index})">Delete</button>
                    </td>
                </tr>
            `;
        });
    }

    // ====== ADD / UPDATE MESSAGE ======
    function addMessage() {
        const name = document.getElementById("name").value.trim();
        const email = document.getElementById("email").value.trim();
        const phone = document.getElementById("phone").value.trim();
        const message = document.getElementById("message").value.trim();

        if (!name || !email || !message) {
            alert("Please fill all required fields");
            return;
        }

        const data = { name, email, phone, message };

        if (editIndex === null) {
            messages.push(data); // CREATE
        } else {
            messages[editIndex] = data; // UPDATE
            editIndex = null;
        }

        localStorage.setItem("messages", JSON.stringify(messages));
        clearForm();
        displayMessages();
    }

    function editMessage(index) {
        const msg = messages[index];
        document.getElementById("name").value = msg.name;
        document.getElementById("email").value = msg.email;
        document.getElementById("phone").value = msg.phone;
        document.getElementById("message").value = msg.message;
        editIndex = index;
    }

    function deleteMessage(index) {
        if(confirm("Are you sure you want to delete this message?")){
            messages.splice(index, 1); // DELETE
            localStorage.setItem("messages", JSON.stringify(messages));
            displayMessages();
        }
    }

    function clearForm() {
        document.getElementById("name").value = "";
        document.getElementById("email").value = "";
        document.getElementById("phone").value = "";
        document.getElementById("message").value = "";
    }

    // ====== ADMIN LOGIN PROMPT ======
    window.onload = function() {
        let isAdmin = prompt("Enter admin password to view messages (leave blank for user mode):");
        if(isAdmin === adminPassword){
            document.getElementById("adminSection").style.display = "block";
            displayMessages();
        }
    }
</script>

</body>
</html>
